{"ast":null,"code":"// Yelp API https://www.yelp.com/developers/v3/manage_app?app_created=True\n// Yelp ClientID: iJwixUBN4GUMrcm6TF4e4g\n// Yelp Secret: ayM8TSldvchnTG7xJles311Ytmyzn2iZG0AkuWClDDgJazYugY6UxJms16HowjV6\nvar clientId = 'iJwixUBN4GUMrcm6TF4e4g';\nvar secret = 'ayM8TSldvchnTG7xJles311Ytmyzn2iZG0AkuWClDDgJazYugY6UxJms16HowjV6';\nvar accessToken;\nvar Yelp = {\n  getAccessToken: function getAccessToken() {\n    if (accessToken) {\n      return new Promise(function (resolve) {\n        return resolve(accessToken);\n      });\n    } // We will make a request to the /token endpoint of the Yelp API and pass\n    // in our client ID and secret to obtain our access token.\n\n\n    return fetch(\"https://cors-anywhere.herokuapp.com/https://api.yelp.com/oauth2/token?grant_type=client_credentials&client_id=\".concat(clientId, \"&client_secret=\").concat(secret), {\n      method: 'POST'\n    }).then(function (response) {\n      return response.json();\n    }).then(function (jsonResponse) {\n      accessToken = jsonResponse.access_token;\n    });\n  },\n  search: function search(term, location, sortBy) {\n    return Yelp.getAccessToken().then(function () {\n      // To retrieve businesses, you'll have to hit the /businesses endpoint of the Yelp API.\n      return fetch(\"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=\".concat(term, \"&location=\").concat(location, \"&sort_by=\").concat(sortBy), {\n        headers: {\n          Authorization: \"Bearer \".concat(accessToken)\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        if (jsonResponse.businesses) {\n          return jsonResponse.businesses.map(function (business) {\n            // id\n            // imageSrc\n            // name\n            // address\n            // city\n            // state\n            // zipCode\n            // category\n            // rating\n            // reviewCount\n            console.log(business);\n            return {\n              id: business.id,\n              imageSrc: business.image_url,\n              name: business.name,\n              address: business.location.address1,\n              city: business.location.city,\n              state: business.location.state,\n              zipCode: business.location.zip_code,\n              category: business.categories[0].title,\n              rating: business.rating,\n              reviewCount: business.review_count\n            };\n          });\n        }\n      });\n    });\n  }\n};\nexport default Yelp;","map":{"version":3,"sources":["C:\\Users\\pc1\\ravenous\\src\\util\\Yelp.js"],"names":["clientId","secret","accessToken","Yelp","getAccessToken","Promise","resolve","fetch","method","then","response","json","jsonResponse","access_token","search","term","location","sortBy","headers","Authorization","businesses","map","business","console","log","id","imageSrc","image_url","name","address","address1","city","state","zipCode","zip_code","category","categories","title","rating","reviewCount","review_count"],"mappings":"AAAA;AACA;AACA;AACA,IAAMA,QAAQ,GAAG,wBAAjB;AACA,IAAMC,MAAM,GAAG,kEAAf;AACA,IAAIC,WAAJ;AAEA,IAAMC,IAAI,GAAG;AACXC,EAAAA,cAAc,EAAE,0BAAW;AACzB,QAAIF,WAAJ,EAAiB;AACf,aAAO,IAAIG,OAAJ,CAAY,UAAAC,OAAO;AAAA,eAAIA,OAAO,CAACJ,WAAD,CAAX;AAAA,OAAnB,CAAP;AACD,KAHwB,CAIzB;AACA;;;AACA,WAAOK,KAAK,yHAAkHP,QAAlH,4BAA4IC,MAA5I,GAAsJ;AAChKO,MAAAA,MAAM,EAAE;AADwJ,KAAtJ,CAAL,CAEJC,IAFI,CAEC,UAAAC,QAAQ,EAAI;AAClB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,KAJM,EAIJF,IAJI,CAIC,UAAAG,YAAY,EAAI;AACtBV,MAAAA,WAAW,GAAGU,YAAY,CAACC,YAA3B;AACD,KANM,CAAP;AAOD,GAdU;AAeXC,EAAAA,MAAM,EAAE,gBAASC,IAAT,EAAeC,QAAf,EAAyBC,MAAzB,EAAiC;AACvC,WAAOd,IAAI,CAACC,cAAL,GAAsBK,IAAtB,CAA2B,YAAM;AACtC;AACA,aAAOF,KAAK,8FAAuFQ,IAAvF,uBAAwGC,QAAxG,sBAA4HC,MAA5H,GAAsI;AAChJC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,mBAAYjB,WAAZ;AAAf;AADuI,OAAtI,CAAL,CAEJO,IAFI,CAEC,UAAAC,QAAQ,EAAI;AAClB,eAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,OAJM,EAIJF,IAJI,CAIC,UAAAG,YAAY,EAAI;AACtB,YAAIA,YAAY,CAACQ,UAAjB,EAA6B;AAC3B,iBAAOR,YAAY,CAACQ,UAAb,CAAwBC,GAAxB,CAA4B,UAAAC,QAAQ,EAAI;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,mBAAO;AACLG,cAAAA,EAAE,EAAEH,QAAQ,CAACG,EADR;AAELC,cAAAA,QAAQ,EAAEJ,QAAQ,CAACK,SAFd;AAGLC,cAAAA,IAAI,EAAEN,QAAQ,CAACM,IAHV;AAILC,cAAAA,OAAO,EAAEP,QAAQ,CAACN,QAAT,CAAkBc,QAJtB;AAKLC,cAAAA,IAAI,EAAET,QAAQ,CAACN,QAAT,CAAkBe,IALnB;AAMLC,cAAAA,KAAK,EAAEV,QAAQ,CAACN,QAAT,CAAkBgB,KANpB;AAOLC,cAAAA,OAAO,EAAEX,QAAQ,CAACN,QAAT,CAAkBkB,QAPtB;AAQLC,cAAAA,QAAQ,EAAEb,QAAQ,CAACc,UAAT,CAAoB,CAApB,EAAuBC,KAR5B;AASLC,cAAAA,MAAM,EAAEhB,QAAQ,CAACgB,MATZ;AAULC,cAAAA,WAAW,EAAEjB,QAAQ,CAACkB;AAVjB,aAAP;AAYD,WAxBM,CAAP;AAyBD;AACF,OAhCM,CAAP;AAiCD,KAnCM,CAAP;AAoCD;AApDU,CAAb;AAuDA,eAAerC,IAAf","sourcesContent":["// Yelp API https://www.yelp.com/developers/v3/manage_app?app_created=True\r\n// Yelp ClientID: iJwixUBN4GUMrcm6TF4e4g\r\n// Yelp Secret: ayM8TSldvchnTG7xJles311Ytmyzn2iZG0AkuWClDDgJazYugY6UxJms16HowjV6\r\nconst clientId = 'iJwixUBN4GUMrcm6TF4e4g';\r\nconst secret = 'ayM8TSldvchnTG7xJles311Ytmyzn2iZG0AkuWClDDgJazYugY6UxJms16HowjV6';\r\nlet accessToken;\r\n\r\nconst Yelp = {\r\n  getAccessToken: function() {\r\n    if (accessToken) {\r\n      return new Promise(resolve => resolve(accessToken));\r\n    }\r\n    // We will make a request to the /token endpoint of the Yelp API and pass\r\n    // in our client ID and secret to obtain our access token.\r\n    return fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/oauth2/token?grant_type=client_credentials&client_id=${clientId}&client_secret=${secret}`, {\r\n      method: 'POST'\r\n    }).then(response => {\r\n      return response.json();\r\n    }).then(jsonResponse => {\r\n      accessToken = jsonResponse.access_token;\r\n    });\r\n  },\r\n  search: function(term, location, sortBy) {\r\n    return Yelp.getAccessToken().then(() => {\r\n      // To retrieve businesses, you'll have to hit the /businesses endpoint of the Yelp API.\r\n      return fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=${term}&location=${location}&sort_by=${sortBy}`, {\r\n        headers: { Authorization: `Bearer ${accessToken}` }\r\n      }).then(response => {\r\n        return response.json();\r\n      }).then(jsonResponse => {\r\n        if (jsonResponse.businesses) {\r\n          return jsonResponse.businesses.map(business => {\r\n            // id\r\n            // imageSrc\r\n            // name\r\n            // address\r\n            // city\r\n            // state\r\n            // zipCode\r\n            // category\r\n            // rating\r\n            // reviewCount\r\n            console.log(business);\r\n            return {\r\n              id: business.id,\r\n              imageSrc: business.image_url,\r\n              name: business.name,\r\n              address: business.location.address1,\r\n              city: business.location.city,\r\n              state: business.location.state,\r\n              zipCode: business.location.zip_code,\r\n              category: business.categories[0].title,\r\n              rating: business.rating,\r\n              reviewCount: business.review_count\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\nexport default Yelp;"]},"metadata":{},"sourceType":"module"}