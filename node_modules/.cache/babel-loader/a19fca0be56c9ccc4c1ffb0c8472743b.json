{"ast":null,"code":"var clientId = 'D48MDEZx0tnClo4Flm2Ldg';\nvar secret = 'pjvdEe0sTsFHunbUFZhiYcLztLyW35JgIQTlEvITcLFug5IXoQTrNy1ovaWL9smx';\nvar accessToken = '';\nvar Yelp = {\n  getAccessToken: function getAccessToken() {\n    if (accessToken) {\n      return new Promise(function (resolve) {\n        resolve(accessToken);\n      });\n    } // Need to request a new access token\n\n\n    return fetch(\"https://cors-anywhere.herokuapp.com/https://api.yelp.com/oauth2/token?grant_type=client_credentials&client_id=\".concat(clientId, \"&client_secret=\").concat(secret), {\n      method: 'POST'\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json();\n      }\n    }).then(function (jsonResponse) {\n      accessToken = jsonResponse.access_token;\n    });\n  },\n  search: function search(term, location, sortBy) {\n    return Yelp.getAccessToken().then(function () {\n      return fetch(\"https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=\".concat(term, \"&location=\").concat(location, \"&sort_by=\").concat(sortBy), {\n        headers: {\n          'Authorization': \"Bearer \".concat(accessToken)\n        }\n      }).then(function (response) {\n        if (response.ok) {\n          return response.json();\n        }\n      }).then(function (jsonResponse) {\n        if (jsonResponse.businesses) {\n          return jsonResponse.businesses.map(function (business) {\n            return {\n              id: business.id,\n              imageSrc: business.image_url,\n              name: business.name,\n              address: business.location.address1,\n              city: business.location.city,\n              state: business.location.state,\n              zipCode: business.location.zipcode,\n              category: business.categories[0].title,\n              rating: business.rating,\n              reviewCount: business.review_count\n            };\n          });\n        }\n      });\n    });\n  }\n};\nexport default Yelp;","map":{"version":3,"sources":["C:\\Users\\pc1\\ravenous\\src\\util\\Yelp.js"],"names":["clientId","secret","accessToken","Yelp","getAccessToken","Promise","resolve","fetch","method","then","response","ok","json","jsonResponse","access_token","search","term","location","sortBy","headers","businesses","map","business","id","imageSrc","image_url","name","address","address1","city","state","zipCode","zipcode","category","categories","title","rating","reviewCount","review_count"],"mappings":"AAAA,IAAMA,QAAQ,GAAG,wBAAjB;AACA,IAAMC,MAAM,GAAG,kEAAf;AACA,IAAIC,WAAW,GAAG,EAAlB;AAEA,IAAMC,IAAI,GAAG;AACTC,EAAAA,cADS,4BACQ;AACb,QAAGF,WAAH,EAAgB;AACZ,aAAO,IAAIG,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC1BA,QAAAA,OAAO,CAACJ,WAAD,CAAP;AACH,OAFM,CAAP;AAGH,KALY,CAOb;;;AACA,WAAOK,KAAK,yHAAkHP,QAAlH,4BAA4IC,MAA5I,GAAsJ;AAC9JO,MAAAA,MAAM,EAAE;AADsJ,KAAtJ,CAAL,CAEJC,IAFI,CAEC,UAAAC,QAAQ,EAAI;AAChB,UAAGA,QAAQ,CAACC,EAAZ,EAAgB;AACZ,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACH;AACJ,KANM,EAMJH,IANI,CAMC,UAAAI,YAAY,EAAI;AACpBX,MAAAA,WAAW,GAAGW,YAAY,CAACC,YAA3B;AACH,KARM,CAAP;AASH,GAlBQ;AAmBTC,EAAAA,MAnBS,kBAmBFC,IAnBE,EAmBIC,QAnBJ,EAmBcC,MAnBd,EAmBsB;AAC3B,WAAQf,IAAI,CAACC,cAAL,GAAsBK,IAAtB,CAA2B,YAAM;AACrC,aAAOF,KAAK,8FAAuFS,IAAvF,uBAAwGC,QAAxG,sBAA4HC,MAA5H,GAAsI;AAC9IC,QAAAA,OAAO,EAAE;AACL,4CAA2BjB,WAA3B;AADK;AADqI,OAAtI,CAAL,CAIJO,IAJI,CAIC,UAAAC,QAAQ,EAAI;AAChB,YAAGA,QAAQ,CAACC,EAAZ,EAAgB;AACZ,iBAAOD,QAAQ,CAACE,IAAT,EAAP;AACH;AACJ,OARM,EAQJH,IARI,CAQC,UAAAI,YAAY,EAAI;AACpB,YAAGA,YAAY,CAACO,UAAhB,EAA4B;AACxB,iBAAOP,YAAY,CAACO,UAAb,CAAwBC,GAAxB,CAA4B,UAAAC,QAAQ,EAAI;AAC3C,mBAAO;AACHC,cAAAA,EAAE,EAAED,QAAQ,CAACC,EADV;AAEHC,cAAAA,QAAQ,EAAEF,QAAQ,CAACG,SAFhB;AAGHC,cAAAA,IAAI,EAAEJ,QAAQ,CAACI,IAHZ;AAIHC,cAAAA,OAAO,EAAEL,QAAQ,CAACL,QAAT,CAAkBW,QAJxB;AAKHC,cAAAA,IAAI,EAAEP,QAAQ,CAACL,QAAT,CAAkBY,IALrB;AAMHC,cAAAA,KAAK,EAAER,QAAQ,CAACL,QAAT,CAAkBa,KANtB;AAOHC,cAAAA,OAAO,EAAET,QAAQ,CAACL,QAAT,CAAkBe,OAPxB;AAQHC,cAAAA,QAAQ,EAAEX,QAAQ,CAACY,UAAT,CAAoB,CAApB,EAAuBC,KAR9B;AASHC,cAAAA,MAAM,EAAEd,QAAQ,CAACc,MATd;AAUHC,cAAAA,WAAW,EAAEf,QAAQ,CAACgB;AAVnB,aAAP;AAYH,WAbM,CAAP;AAcH;AACJ,OAzBM,CAAP;AA0BH,KA3BO,CAAR;AA4BH;AAhDQ,CAAb;AAmDA,eAAenC,IAAf","sourcesContent":["const clientId = 'D48MDEZx0tnClo4Flm2Ldg';\r\nconst secret = 'pjvdEe0sTsFHunbUFZhiYcLztLyW35JgIQTlEvITcLFug5IXoQTrNy1ovaWL9smx';\r\nlet accessToken = '';\r\n\r\nconst Yelp = {\r\n    getAccessToken() {\r\n        if(accessToken) {\r\n            return new Promise(resolve => {\r\n                resolve(accessToken)\r\n            });\r\n        }\r\n\r\n        // Need to request a new access token\r\n        return fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/oauth2/token?grant_type=client_credentials&client_id=${clientId}&client_secret=${secret}`, {\r\n            method: 'POST'\r\n        }).then(response => {\r\n            if(response.ok) {\r\n                return response.json();\r\n            }\r\n        }).then(jsonResponse => {\r\n            accessToken = jsonResponse.access_token;\r\n        });\r\n    },\r\n    search(term, location, sortBy) {\r\n        return  Yelp.getAccessToken().then(() => {\r\n            return fetch(`https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=${term}&location=${location}&sort_by=${sortBy}`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${accessToken}`\r\n                }\r\n            }).then(response => {\r\n                if(response.ok) {\r\n                    return response.json();\r\n                }\r\n            }).then(jsonResponse => {\r\n                if(jsonResponse.businesses) {\r\n                    return jsonResponse.businesses.map(business => {\r\n                        return {\r\n                            id: business.id,\r\n                            imageSrc: business.image_url,\r\n                            name: business.name,\r\n                            address: business.location.address1,\r\n                            city: business.location.city,\r\n                            state: business.location.state,\r\n                            zipCode: business.location.zipcode,\r\n                            category: business.categories[0].title,\r\n                            rating: business.rating,\r\n                            reviewCount: business.review_count\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nexport default Yelp;"]},"metadata":{},"sourceType":"module"}